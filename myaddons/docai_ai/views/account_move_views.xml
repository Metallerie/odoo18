<odoo>
  <record id="view_move_form_inherit_docai_scan" model="ir.ui.view">
    <field name="name">account.move.form.inherit.docai.scan</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="arch" type="xml">
      <xpath expr="//header" position="inside">
        <button name="action_docai_scan_json"
                type="object"
                string="Scan from JSON"
                class="oe_secondary"/>
      </xpath>
    </field>
  </record>

  <record id="view_move_form_docai" model="ir.ui.view">
    <field name="name">account.move.form.docai</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="arch" type="xml">
      <xpath expr="//sheet/notebook" position="inside">
        <page string="DocAI (Simplifié)">
          <field name="docai_json" widget="text" readonly="1" nolabel="1"/>
        </page>
        <page string="DocAI (Complet)">
          <field name="docai_json_raw" widget="text" readonly="1" nolabel="1"/>
        </page>
      </xpath>
      <xpath expr="//header" position="inside">
        <button name="action_docai_analyze_attachment"
                type="object"
                string="Analyser PDF avec DocAI"
                class="oe_highlight"/>
        <button name="action_docai_refresh_json"
                type="object"
                string="Rafraîchir JSON"
                class="oe_secondary"/>
 <button name="action_docai_download_json_raw"
        type="object"
        string="⬇ Télécharger JSON Complet"
        class="oe_secondary"/>

<button name="action_docai_download_json_min"
        type="object"
        string="⬇ Télécharger JSON Simplifié"
        class="oe_secondary"/>
      </xpath>

   
    </field>
  </record>


  <record id="view_move_form_inherit_docai_analyze" model="ir.ui.view">
    <field name="name">account.move.form.inherit.docai.analyze</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="arch" type="xml">
      <xpath expr="//header" position="inside">
        <button name="action_docai_analyze_attachment"
                type="object"
                string="Analyser PDF avec DocAI"
                class="oe_highlight"/>
      </xpath>
    </field>
  </record>
  <!-- Boutons dans le header -->
  <record id="view_move_form_inherit_docai" model="ir.ui.view">
    <field name="name">account.move.form.inherit.docai</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="arch" type="xml">
      <xpath expr="//header" position="inside">
        <button name="action_docai_scan_json"
                type="object"
                string="Scan from JSON"
                class="oe_secondary"/>
        <button name="action_docai_debug_json"
                type="object"
                string="Debug JSON"
                class="oe_link"/>
      </xpath>
    </field>
  </record>

  <!-- Onglet pour afficher le JSON brut -->
  <record id="view_move_form_json_tab" model="ir.ui.view">
    <field name="name">account.move.form.json.tab</field>
    <field name="model">account.move</field>
    <field name="inherit_id" ref="account.view_move_form"/>
    <field name="arch" type="xml">
      <xpath expr="//sheet/notebook" position="inside">
        <page string="OCR JSON">
          <field name="docai_json" widget="text" readonly="1" nolabel="1"/>
        </page>
      </xpath>
    </field>
  </record>

</odoo>


