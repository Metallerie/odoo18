<odoo>
  <data inherit_id="website_sale.cart_lines">

    <!-- 1) Remplacer le bloc "secondary quantity" interactif par du readonly -->
    <xpath expr="//div[@name='website_sale_cart_line_quantity']" position="before">
      <t t-if="line.secondary_uom_id">
        <div class="mb-2">
          <strong>Quantité :</strong>
          <span t-out="line.secondary_uom_qty"/>
          <span t-out="line.secondary_uom_id.uom_id.name"/>
        </div>
        <div class="text-muted small mb-2">
          ≈ <span t-out="line.product_uom_qty"/>
          <span t-out="line.product_uom.sudo().name"/>
        </div>
        <div class="text-muted small">
          Pour modifier, supprime la ligne et retourne sur la fiche produit.
        </div>
      </t>
    </xpath>

    <!-- 2) Ne pas afficher la qty standard Odoo si on est en secondaire -->
    <xpath expr="//div[@name='website_sale_cart_line_quantity']//t[@t-if='show_qty']" position="attributes">
      <attribute name="t-if">show_qty and not line.secondary_uom_id</attribute>
    </xpath>

    <!-- 3) Garder l'unité standard affichée seulement si pas d'unité secondaire -->
    <xpath expr="//div[@name='website_sale_cart_line_quantity']" position="after">
      <t t-if="not line.secondary_uom_id">
        <div class="mb-2">
          <span t-out="line.product_uom.sudo().name"/>
        </div>
      </t>
    </xpath>

  </data>
</odoo>
